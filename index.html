<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="icon" href="images/favicon.svg?v=2" type="image/svg+xml">
        <link rel="shortcut icon" href="images/favicon.svg?v=2" type="image/svg+xml">
        <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="index.html" class="logo">
                <i class="fas fa-heart"></i>
                <span>Nexos</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="subastas.html">Subastas</a></li>
                <li><a href="rifas.html">Rifas</a></li>
                <li><a href="ventas.html">Ventas</a></li>
                <li><a href="causas.html">Causas</a></li>
                <li><a href="empresas.html">Empresas</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
            <button class="cta-button" id="navAuthButton">Iniciar Sesi√≥n</button>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Conectando Empresas con Causas que Importan</h1>
            <p>Descubre subastas especiales donde tu donaci√≥n tiene un impacto directo en causas espec√≠ficas como investigaci√≥n del c√°ncer, s√≠ndrome de Duchenne y organizaciones como Coaniquem.</p>
            <button class="cta-button" onclick="window.location.href='subastas.html'">Explorar Subastas</button>
        </div>
    </section>

    <section class="trending-section">
        <h2 class="section-title">Subastas Destacadas üî•</h2>
        <div class="carousel-container">
            <div class="carousel">
                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_1'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/polera.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Camiseta de F√∫tbol Autografiada</h3>
                        <p class="card-description">Camiseta firmada por el equipo nacional, beneficiando a ni√±os con c√°ncer.</p>
                        <div class="beneficiary">
                            <i class="fas fa-hospital"></i>
                            <span>Telet√≥n</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_2'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/consola.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Consola Retro Coleccionable</h3>
                        <p class="card-description">Nueva consola limitada para apoyar investigaci√≥n del s√≠ndrome de Duchenne.</p>
                        <div class="beneficiary">
                            <i class="fas fa-child"></i>
                            <span>Fundaci√≥n Duchenne</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_3'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/experiencia.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Experiencia con Artista Nacional</h3>
                        <p class="card-description">Encuentro exclusivo con artista para apoyar a Coaniquem.</p>
                        <div class="beneficiary">
                            <i class="fas fa-burn"></i>
                            <span>Coaniquem</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_4'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/setup.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Paquete de Equipo Gamer</h3>
                        <p class="card-description">Set completo de gaming para recaudar fondos para c√°ncer infantil.</p>
                        <div class="beneficiary">
                            <i class="fas fa-laptop"></i>
                            <span>Fundaci√≥n C√°ncer Infantil</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_8'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/bici.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Bicicleta de Monta√±a Profesional</h3>
                        <p class="card-description">Bicicleta de alta gama para rutas extremas, apoyando vivienda social.</p>
                        <div class="beneficiary">
                            <i class="fas fa-home"></i>
                            <span>Hogar de Cristo</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; padding: 0.5rem; background: #f8f9fa; border-radius: 8px;">
                            <i class="fas fa-trophy" style="color: #ffc107;"></i>
                            <div style="flex: 1;">
                                <div style="font-size: 0.85rem; color: #666;">Ganador</div>
                                <div style="font-weight: 600; color: #333;">Daniela Vega - $450.000</div>
                            </div>
                        </div>
                        <div class="trending-badge" style="background: #6c757d;">
                            <i class="fas fa-check-circle"></i>
                            <span>Finalizada</span>
                        </div>
                    </div>
                </div>

                <!-- Duplicado para efecto infinito -->
                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_1'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/polera.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Camiseta de F√∫tbol Autografiada</h3>
                        <p class="card-description">Camiseta firmada por el equipo nacional, beneficiando a ni√±os con c√°ncer.</p>
                        <div class="beneficiary">
                            <i class="fas fa-hospital"></i>
                            <span>Telet√≥n</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_2'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/consola.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Consola Retro Coleccionable</h3>
                        <p class="card-description">Nueva consola limitada para apoyar investigaci√≥n del s√≠ndrome de Duchenne.</p>
                        <div class="beneficiary">
                            <i class="fas fa-child"></i>
                            <span>Fundaci√≥n Duchenne</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_3'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/experiencia.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Experiencia con Artista Nacional</h3>
                        <p class="card-description">Encuentro exclusivo con artista para apoyar a Coaniquem.</p>
                        <div class="beneficiary">
                            <i class="fas fa-burn"></i>
                            <span>Coaniquem</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_4'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/setup.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Paquete de Equipo Gamer</h3>
                        <p class="card-description">Set completo de gaming para recaudar fondos para c√°ncer infantil.</p>
                        <div class="beneficiary">
                            <i class="fas fa-laptop"></i>
                            <span>Fundaci√≥n C√°ncer Infantil</span>
                        </div>
                        <div class="trending-badge">
                            <i class="fas fa-fire"></i>
                            <span>Tendencia</span>
                        </div>
                    </div>
                </div>

                <div class="auction-card" onclick="window.location.href='detalle-subasta.html?id=prueba_8'" style="cursor: pointer;">
                    <div class="card-image" style="background-image: url('images/bici.png');"></div>
                    <div class="card-content">
                        <h3 class="card-title">Bicicleta de Monta√±a Profesional</h3>
                        <p class="card-description">Bicicleta de alta gama para rutas extremas, apoyando vivienda social.</p>
                        <div class="beneficiary">
                            <i class="fas fa-home"></i>
                            <span>Hogar de Cristo</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; padding: 0.5rem; background: #f8f9fa; border-radius: 8px;">
                            <i class="fas fa-trophy" style="color: #ffc107;"></i>
                            <div style="flex: 1;">
                                <div style="font-size: 0.85rem; color: #666;">Ganador</div>
                                <div style="font-weight: 600; color: #333;">Daniela Vega - $450.000</div>
                            </div>
                        </div>
                        <div class="trending-badge" style="background: #6c757d;">
                            <i class="fas fa-check-circle"></i>
                            <span>Finalizada</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="charity-list">
        <h2 class="section-title">Causas que Apoyamos</h2>
        <div class="charities">
            <div class="charity-card">
                <div class="charity-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <h3 class="charity-name">Coaniquem</h3>
                <p class="charity-desc">Apoyo a ni√±os quemados y sus familias</p>
            </div>

            <div class="charity-card">
                <div class="charity-icon">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <h3 class="charity-name">Telet√≥n</h3>
                <p class="charity-desc">Rehabilitaci√≥n de personas con discapacidad</p>
            </div>

            <div class="charity-card">
                <div class="charity-icon">
                    <i class="fas fa-home"></i>
                </div>
                <h3 class="charity-name">Techo para Chile</h3>
                <p class="charity-desc">Vivienda digna para familias en situaci√≥n de calle</p>
            </div>

            <div class="charity-card">
                <div class="charity-icon">
                    <i class="fas fa-dna"></i>
                </div>
                <h3 class="charity-name">Fundaci√≥n Duchenne</h3>
                <p class="charity-desc">Investigaci√≥n y apoyo para s√≠ndrome de Duchenne</p>
            </div>
        </div>
    </section>

    <section class="trending-section">
        <h2 class="section-title">Otras Subastas</h2>
        <div class="auctions-grid">
            <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=prueba_5'" style="cursor: pointer;">
                <div class="grid-image" style="background-image: url('images/colocolo.png');"></div>
                <div class="grid-content">
                    <h3 class="card-title">Polera de Jugador Profesional</h3>
                    <p class="card-description">Polera oficial usada en partido oficial, donada para investigaci√≥n del c√°ncer.</p>
                    <div class="beneficiary">
                        <i class="fas fa-hospital"></i>
                        <span>Fundaci√≥n C√°ncer</span>
                    </div>
                </div>
            </div>

            <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=prueba_2'" style="cursor: pointer;">
                <div class="grid-image" style="background-image: url('images/coleccionable.png');"></div>
                <div class="grid-content">
                    <h3 class="card-title">Figura Coleccionable Limitada</h3>
                    <p class="card-description">Pieza √∫nica de colecci√≥n para apoyar a ni√±os con enfermedades raras.</p>
                    <div class="beneficiary">
                        <i class="fas fa-child"></i>
                        <span>Asociaci√≥n Duchenne</span>
                    </div>
                </div>
            </div>

            <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=prueba_3'" style="cursor: pointer;">
                <div class="grid-image" style="background-image: url('images/evento.png');"></div>
                <div class="grid-content">
                    <h3 class="card-title">Experiencia VIP en Evento</h3>
                    <p class="card-description">Acceso exclusivo a evento deportivo para recaudar fondos para Coaniquem.</p>
                    <div class="beneficiary">
                        <i class="fas fa-burn"></i>
                        <span>Coaniquem</span>
                    </div>
                </div>
            </div>

            <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=prueba_6'" style="cursor: pointer;">
                <div class="grid-image" style="background-image: url('images/laptop.png');"></div>
                <div class="grid-content">
                    <h3 class="card-title">Equipo Tecnol√≥gico √öltima Generaci√≥n</h3>
                    <p class="card-description">Laptop gaming de alta gama para apoyar educaci√≥n de ni√±os en situaci√≥n vulnerable.</p>
                    <div class="beneficiary">
                        <i class="fas fa-school"></i>
                        <span>Techo para Chile</span>
                    </div>
                </div>
            </div>

            <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=prueba_7'" style="cursor: pointer;">
                <div class="grid-image" style="background-image: url('images/pintura.png');"></div>
                <div class="grid-content">
                    <h3 class="card-title">Obra de Arte Original</h3>
                    <p class="card-description">Pintura original de artista reconocido para investigaci√≥n m√©dica.</p>
                    <div class="beneficiary">
                        <i class="fas fa-heartbeat"></i>
                        <span>Fundaci√≥n C√°ncer Infantil</span>
                    </div>
                </div>
            </div>

            <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=prueba_1'" style="cursor: pointer;">
                <div class="grid-image" style="background-image: url('images/bunkers.png');"></div>
                <div class="grid-content">
                    <h3 class="card-title">Clase de M√∫sica con M√∫sico Nacional</h3>
                    <p class="card-description">Clase personalizada para apoyar a ni√±os con necesidades especiales.</p>
                    <div class="beneficiary">
                        <i class="fas fa-music"></i>
                        <span>Telet√≥n</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="logo">
                <i class="fas fa-heart"></i>
                <span>Nexos</span>
            </div>
            <p>Conectando empresas con causas que transforman vidas</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
            <p class="copyright">¬© 2025 Nexos. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Carrusel infinito - duplica los elementos si es necesario
        const carousel = document.querySelector('.carousel');
        const carouselContainer = carousel.closest('.carousel-container');
        
        // Pausar al pasar el mouse y reanudar al salir
        carousel.addEventListener('mouseenter', () => {
            carousel.style.animationPlayState = 'paused';
        });
        
        carousel.addEventListener('mouseleave', () => {
            carousel.style.animationPlayState = 'running';
        });

        // Ajustar la animaci√≥n al cambiar el tama√±o de la ventana
        window.addEventListener('resize', () => {
            const cardWidth = 300;
            const gap = 32; // 2rem
            const totalCards = 4;
            const totalWidth = (cardWidth + gap) * totalCards;
            
            carousel.style.setProperty('--scroll-distance', `-${totalWidth}px`);
        });
    </script>
    <script src="notifications.js"></script>
    <script src="api-config.js"></script>
    <script src="auth-backend.js"></script>
    <script src="wallet-manager.js"></script>
    <script src="subastas-manager.js"></script>
    <script src="rifas-manager.js"></script>
    <script src="navbar-helper.js"></script>
    <script>
        // Cargar subastas destacadas desde el backend
        async function cargarSubastasDestacadas() {
            try {
                const result = await subastasManager.getSubastas({ 
                    estado: 'activa', 
                    limit: 6 
                });
                
                if (result.success && result.subastas.length > 0) {
                    // Cargar en carrusel
                    const carousel = document.querySelector('.carousel');
                    if (carousel) {
                        carousel.innerHTML = result.subastas.map(subasta => {
                            const img = subasta.imagen || 'images/placeholder.png';
                            const tiempoRestante = calcularTiempoRestante(subasta.fecha_fin);
                            const diasRestantes = calcularDiasRestantes(subasta.fecha_fin);
                            const numPujas = subasta.num_pujas || 0;
                            
                            // Determinar badge seg√∫n estado
                            let badgeClass = 'badge-new';
                            let badgeText = '‚ú® Activa';
                            if (diasRestantes <= 1) {
                                badgeClass = 'badge-ending';
                                badgeText = '‚è∞ Termina Pronto';
                            } else if (numPujas > 10) {
                                badgeClass = 'badge-hot';
                                badgeText = 'üî• Popular';
                            }
                            
                            return `
                                <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=${subasta.id}'" style="cursor: pointer;">
                                    <div class="grid-image" style="background-image: url('${img}');"></div>
                                    <span class="card-badge ${badgeClass}">${badgeText}</span>
                                    <div class="grid-content">
                                        <h3>${subasta.titulo}</h3>
                                        <p>${(subasta.descripcion || '').substring(0, 100)}...</p>
                                        <div class="beneficiary">
                                            <i class="fas fa-heart"></i>
                                            <span>${subasta.causa_nombre || subasta.empresa_razon_social || 'Sin beneficiario'}</span>
                                        </div>
                                        <div class="card-meta">
                                            <div class="card-price">
                                                <span class="price-label">Precio actual</span>
                                                <span class="price-value">$${(subasta.precio_actual || 0).toLocaleString('es-CL')}</span>
                                            </div>
                                            <div class="pujas-info">
                                                <i class="fas fa-gavel"></i>
                                                <span>${numPujas} ${numPujas === 1 ? 'puja' : 'pujas'}</span>
                                            </div>
                                        </div>
                                        <div class="card-time">
                                            <i class="far fa-clock"></i>
                                            <span>${tiempoRestante}</span>
                                        </div>
                                        <div class="card-actions">
                                            <button class="card-button card-button-primary">
                                                <i class="fas fa-gavel"></i> Ver Subasta
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('');
                    }

                    // Cargar en "Otras Subastas"
                    const grid = document.querySelector('.auctions-grid');
                    if (grid) {
                        const subastas = result.subastas.slice(0, 6);
                        grid.innerHTML = subastas.map(subasta => {
                            const img = subasta.imagen || 'images/placeholder.png';
                            const tiempoRestante = calcularTiempoRestante(subasta.fecha_fin);
                            const diasRestantes = calcularDiasRestantes(subasta.fecha_fin);
                            const numPujas = subasta.num_pujas || 0;
                            
                            // Determinar badge seg√∫n estado
                            let badgeClass = 'badge-new';
                            let badgeText = '‚ú® Activa';
                            if (diasRestantes <= 1) {
                                badgeClass = 'badge-ending';
                                badgeText = '‚è∞ Termina Pronto';
                            } else if (numPujas > 10) {
                                badgeClass = 'badge-hot';
                                badgeText = 'üî• Popular';
                            }
                            
                            return `
                                <div class="grid-card" onclick="window.location.href='detalle-subasta.html?id=${subasta.id}'" style="cursor: pointer;">
                                    <div class="grid-image" style="background-image: url('${img}');"></div>
                                    <span class="card-badge ${badgeClass}">${badgeText}</span>
                                    <div class="grid-content">
                                        <h3>${subasta.titulo}</h3>
                                        <p>${(subasta.descripcion || '').substring(0, 100)}...</p>
                                        <div class="beneficiary">
                                            <i class="fas fa-heart"></i>
                                            <span>${subasta.causa_nombre || subasta.empresa_razon_social || 'Sin beneficiario'}</span>
                                        </div>
                                        <div class="card-meta">
                                            <div class="card-price">
                                                <span class="price-label">Precio actual</span>
                                                <span class="price-value">$${(subasta.precio_actual || 0).toLocaleString('es-CL')}</span>
                                            </div>
                                            <div class="pujas-info">
                                                <i class="fas fa-gavel"></i>
                                                <span>${numPujas} ${numPujas === 1 ? 'puja' : 'pujas'}</span>
                                            </div>
                                        </div>
                                        <div class="card-time">
                                            <i class="far fa-clock"></i>
                                            <span>${tiempoRestante}</span>
                                        </div>
                                        <div class="card-actions">
                                            <button class="card-button card-button-primary">
                                                <i class="fas fa-gavel"></i> Ver Subasta
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('');
                    }
                }
            } catch (error) {
                console.error('Error cargando subastas:', error);
            }
        }

        // Calcular tiempo restante
        function calcularTiempoRestante(fechaFin) {
            const ahora = new Date();
            const fin = new Date(fechaFin);
            const diff = fin - ahora;
            
            if (diff <= 0) return 'Finalizada';
            
            const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
            const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            
            if (dias > 0) return `${dias}d ${horas}h`;
            return `${horas}h`;
        }
        
        // Calcular d√≠as restantes
        function calcularDiasRestantes(fechaFin) {
            const ahora = new Date();
            const fin = new Date(fechaFin);
            const diff = fin - ahora;
            
            if (diff <= 0) return 0;
            
            return Math.floor(diff / (1000 * 60 * 60 * 24));
        }
        
        // Cargar subastas destacadas al iniciar
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', cargarSubastasDestacadas);
        } else {
            cargarSubastasDestacadas();
        }
    </script>
</body>
</html>